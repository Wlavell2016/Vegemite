
<h1>Gardens</h1>

<div class="garden">
    <% @gardens.each do |garden| %>
        <%= garden.image %>
        <h3> Garden:  <%= garden.title %> </h3>
            <p>
                Address: <%= garden.address %><br/>
                Size: <%= garden.size %><br/>
                Description: <%= garden.description %><br/>
                <%= link_to 'More Details or whatever', garden_path(garden) %>
            </p>
    <% end  %>

    <div id="map">

    </div>
</div>

    <p class='geodata'>
    <% @gardens.each do |f| %>
            <p data-geo= "<%= f.address %>"></p>
            <% end %>
    </p>


    <script>
mapboxgl.accessToken = 'pk.eyJ1Ijoibmlja3lzIiwiYSI6ImNpd2k3ZXN6NjAxYWkyem8wYXU4aXY2dmkifQ.l7TWcWa2NtXXmaBpiQyKRg';
var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v9',
    center: [-79.4512, 43.6568],
    zoom: 13
});

var geocoder = new MapboxGeocoder({
    accessToken: mapboxgl.accessToken
});

map.addControl(geocoder);

// After the map style has loaded on the page, add a source layer and default
// styling for a single point.
map.on('load', function() {
    map.addSource('single-point', {
        "type": "geojson",
        "data": {
            "type": "FeatureCollection",
            "features": []
        }
    });

    map.addLayer({
        "id": "point",
        "source": "single-point",
        "type": "circle",
        "paint": {
            "circle-radius": 10,
            "circle-color": "#007cbf"
        }
    });

    // Listen for the `geocoder.input` event that is triggered when a user
    // makes a selection and add a symbol that matches the result.
    geocoder.on('result', function(ev) {
        map.getSource('single-point').setData(ev.result.geometry);
    });
});

//         L.mapbox.accessToken = 'pk.eyJ1Ijoibmlja3lzIiwiYSI6ImNpd2k3ZXN6NjAxYWkyem8wYXU4aXY2dmkifQ.l7TWcWa2NtXXmaBpiQyKRg';
//         var map = L.mapbox.map('map', 'mapbox.streets')
//         // .setView([49.27970, -123.11562], 12);
//

    </script>
