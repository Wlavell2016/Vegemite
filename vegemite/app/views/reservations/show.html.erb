<%= link_to "Back", new_garden_reservation_url(@garden, @reservation) %>
<h1 class="page-title"><%= @reservation.user.username.capitalize %>, you're growing veg at...</h1>

 <div class="gardenshowbox">
 <div class="reservations-show">
<p class="reservation-details">
  <%= @garden.title.upcase %></br>
  Date: <%= @reservation.startdate %><br/>
  Note: <%= @reservation.note %>
</p>
<!-- iterate thru all the grower's reservations -->

<%= link_to "Edit", edit_garden_reservation_path(@garden, @reservation) %>
|
<%= link_to "Delete", garden_reservation_path(@garden, @reservation), method: :delete, data: {confirm: "Are you sure you want to delete this reservation?"}  %>

</div>
<div id="map">

</div>

</div>
<script>
    function initMap() {
    var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 12,
        center: {lat: 49.27970, lng: -123.11562},
        });

    function codeAddress(address_input, infowindow) {
        var garden = address_input
        var infoInput = infowindow
        var geocoder = new google.maps.Geocoder();
        geocoder.geocode( {'address': garden}, function(results, status) {
                console.log(results, status)
        if (status == 'OK') {
            map.setCenter(results[0].geometry.location);
            var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
            });
        var contentString = infoInput
        var infowindow = new google.maps.InfoWindow({
            content: contentString
            });
        marker.addListener('click', function() {
        infowindow.open(map, marker);
    })
      } else {
        alert('Geocode was not successful for the following reason: ' + status);
      }
    });
  }
    codeAddress("<%= @garden.address %>")
}
</script>
